var searchFunc=function(e,t,c){"use strict";var l="<i id='local-search-close'>x</i>";$.ajax({url:e,dataType:"xml",success:function(e){var a=$("entry",e).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get(),r=document.getElementById(t),n=document.getElementById(c);r.addEventListener("input",function(){var e='<ul class="search-result-list">',t=this.value.trim().toLowerCase().split(/[\s\-]+/);if(n.innerHTML="",!(this.value.trim().length<=0)){if(a.forEach(function(c){var l=!0;c.title&&""!==c.title.trim()||(c.title="Untitled");var a=c.title.trim().toLowerCase(),r=c.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),n=c.url,s=-1,i=-1,o=-1;if(""!==r?t.forEach(function(e,t){s=a.indexOf(e),i=r.indexOf(e),s<0&&i<0?l=!1:(i<0&&(i=0),0==t&&(o=i))}):l=!1,l){e+="<li><a href='"+n+"' class='search-result-title'>"+a+"</a>";var u=c.content.trim().replace(/<[^>]+>/g,"");if(o>=0){var h=o-20,f=o+80;h<0&&(h=0),0==h&&(f=100),f>u.length&&(f=u.length);var m=u.substr(h,f);t.forEach(function(e){var t=new RegExp(e,"gi");m=m.replace(t,'<em class="search-keyword">'+e+"</em>")}),e+='<p class="search-result">'+m+"...</p>"}e+="</li>"}}),-1===(e+="</ul>").indexOf("<li>"))return n.innerHTML=l+"<ul><span class='local-search-empty'>没有找到内容，更换下搜索词试试吧~<span></ul>";n.innerHTML=l+e}})}}),$(document).on("click","#local-search-close",function(){$("#local-search-input").val(""),$("#local-search-result").html("")}),$(document).on("focus","#local-search",function(){$("#local-search-icon-search").html("❌"),$("#local-search-icon-search").attr("id","local-search-icon-close")}),$(document).on("click","#local-search-icon-close",function(){$("#local-search-input").val(""),$("#local-search-result").html(""),$("#local-search-icon-close").html("🔍"),$("#local-search-icon-close").attr("id","local-search-icon-search")})};